# name: EC2-CD-Actions

# # Trigger deployment only on push to dev branch
# on:
#   push:
#     branches: [ main ]
      

# jobs:
#   deploy:
#     name: Deploy to EC2 on master branch push
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout the files
#         uses: actions/checkout@v3

#       - name: executing remote ssh commands using password
#         uses: appleboy/ssh-action@v0.1.5
#         with:
#           host: ${{ secrets.HOST }}
#           port: ${{ secrets.PORT }}
#           username: ${{ secrets.USERNAME }}
#           key: ${{ secrets.KEY }}
          
#           script: |
#             cd /home/ubuntu/myproject/deploymentcicd
#             pwd
#             git pull https://Muhammedshafeerali:${{secrets.TOKEN}}@github.com/Muhammedshafeerali/deploymentcicd
#             source myprojenv/bin/activate
#             pip3 install -r requirment.txt
#             python3 manage.py makemigrations
#             python3 manage.py migrate
#             python3 manage.py collectstatic --noinput
#             sudo systemctl restart gunicorn
#             sudo systemctl reload nginx





    